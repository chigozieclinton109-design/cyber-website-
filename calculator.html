<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>cyber Calculator</title>
  <style>
    :root{--bg:#0f1724;--panel:#0b1220;--accent:#06b6d4;--key:#111827;--muted:#94a3b8}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial}
    body{display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#051025 0%,#0a1220 100%);color:#e6eef6}
    .calc{width:340px;background:linear-gradient(180deg,var(--panel),#041526);border-radius:14px;padding:18px;box-shadow:0 10px 30px rgba(2,6,23,.6)}
    .display{height:64px;background:rgba(255,255,255,0.02);border-radius:10px;padding:10px 14px;display:flex;flex-direction:column;justify-content:center;align-items:flex-end;box-sizing:border-box}
    .display .expr{font-size:14px;color:var(--muted);opacity:.9}
    .display .value{font-size:28px;font-weight:600}
    .keys{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:14px}
    button{height:56px;border-radius:10px;border:0;background:linear-gradient(180deg,#08121a,#051022);color:#e6eef6;font-size:18px;cursor:pointer}
    button.op{background:linear-gradient(180deg,#064e57,#05555d);color:white}
    button.eq{grid-column:span 2;background:var(--accent);color:#042028;font-weight:700}
    button.zero{grid-column:span 2}
    button:active{transform:translateY(1px)}
    .small{font-size:14px}
    footer{font-size:12px;color:var(--muted);text-align:center;margin-top:12px}
  </style>
</head>
<body>
  <div class="calc" role="application" aria-label="Simple Calculator">
    <div class="display" aria-live="polite">
      <div class="expr" id="expr">&nbsp;</div>
      <div class="value" id="value">0</div>
    </div>

    <div class="keys">
      <button id="clear">C</button>
      <button id="back">⌫</button>
      <button id="paren" class="op">( )</button>
      <button data-op="/" class="op">÷</button>

      <button data-num="7">7</button>
      <button data-num="8">8</button>
      <button data-num="9">9</button>
      <button data-op="*" class="op">×</button>

      <button data-num="4">4</button>
      <button data-num="5">5</button>
      <button data-num="6">6</button>
      <button data-op="-" class="op">−</button>

      <button data-num="1">1</button>
      <button data-num="2">2</button>
      <button data-num="3">3</button>
      <button data-op="+" class="op">+</button>

      <button data-num="0" class="zero">0</button>
      <button data-num="." class="small">.</button>
      <button id="equals" class="eq">=</button>
    </div>
    <footer>Keyboard supported: digits, + - * / ( ) Enter Backspace</footer>
  </div>

  <script>
    const exprEl = document.getElementById('expr');
    const valueEl = document.getElementById('value');
    let expr = '';
    let lastWasOp = false;

    function updateUI(){
      exprEl.textContent = expr || '\u00A0';
      valueEl.textContent = expr ? tryEvalPreview(expr) : '0';
    }

    function append(s){
      expr += s;
      lastWasOp = /[+\-*/]$/.test(s);
      updateUI();
    }

    function tryEvalPreview(e){
      try{
        if(!/^[0-9+\-*/().\s]+$/.test(e)) return 'Err';
        // eslint-disable-next-line no-new-func
        const res = Function('return ('+e+')')();
        return (res === undefined) ? '' : String(res);
      }catch(e){
        return '';
      }
    }

    function clearAll(){ expr=''; updateUI(); }
    function backspace(){ expr = expr.slice(0,-1); updateUI(); }

    document.querySelectorAll('[data-num]').forEach(b=>{
      b.addEventListener('click', ()=> append(b.getAttribute('data-num')));
    });
    document.querySelectorAll('[data-op]').forEach(b=>{
      b.addEventListener('click', ()=> append(b.getAttribute('data-op')));
    });

    document.getElementById('clear').addEventListener('click', clearAll);
    document.getElementById('back').addEventListener('click', backspace);
    document.getElementById('paren').addEventListener('click', ()=>{
      // insert '(' or ')' smartly
      const open = (expr.match(/\(/g)||[]).length;
      const close = (expr.match(/\)/g)||[]).length;
      if (open === close || /[+\-*/(]$/.test(expr)) append('('); else append(')');
    });

    document.getElementById('equals').addEventListener('click', ()=>{
      try{
        if(!expr) return;
        if(!/^[0-9+\-*/().\s]+$/.test(expr)) { valueEl.textContent='Error'; return; }
        // eslint-disable-next-line no-new-func
        const result = Function('return ('+expr+')')();
        expr = String(result);
        updateUI();
      }catch(e){ valueEl.textContent='Error'; }
    });

    // Keyboard support
    window.addEventListener('keydown', (ev)=>{
      const k = ev.key;
      if(/^[0-9]$/.test(k) || ['+','-','*','/','(',')','.'].includes(k)){
        append(k); ev.preventDefault();
      }else if(k === 'Enter'){
        document.getElementById('equals').click(); ev.preventDefault();
      }else if(k === 'Backspace'){
        backspace(); ev.preventDefault();
      }else if(k === 'Escape'){
        clearAll(); ev.preventDefault();
      }
    });

    updateUI();
  </script>
</body>
</html>